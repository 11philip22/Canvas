#import "local", "WEBENGINE_PATH|EcbCallISAPI" as "EcbCallISAPI"
#import "local", "sendint" as "sendint"
#import "local", "free" as "free"
#import "local", "malloc" as "malloc"
#import "local", "memset" as "memset"
#import "local", "senddata2self" as "senddata2self"

void main(){
  char * gen_keys;
  char * autogen_keys;

  int return_value; 

  gen_keys = malloc(1024);
  autogen_keys = malloc(1024);

  if (gen_keys == 0 ){
    if (autogen_keys != 0){
      free(autogen_keys);
    }
    sendint(0);
  }
  
  if (autogen_keys == 0){
    if (gen_keys != 0){
      free(gen_keys);
    }
    sendint(0);
  }

  memset(gen_keys, 0, 1024);
  memset(autogen_keys, 0, 1024);

  sendint(1);

  return_value = 0;

  return_value = EcbCallISAPI(0, 4, gen_keys, 1024, autogen_keys, 1024);
  if (return_value == 1){
    senddata2self(gen_keys, 1024);
    senddata2self(autogen_keys, 1024);
  }

  free(gen_keys);
  free(autogen_keys);
  return;
}
